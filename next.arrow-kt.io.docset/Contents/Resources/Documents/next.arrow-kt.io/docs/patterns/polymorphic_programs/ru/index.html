<!DOCTYPE html><html><head>
    <meta charset="UTF-8"/>
    <title>Arrow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Functional companion to Kotlin&#39;s Standard Library"/>
    <meta name="keywords" content="functional-programming, kotlin-library, monads, monad-transformers, functional-data-structure, kotlin, fp-types, adt, free-monads, tagless-final, mtl, for-comprehension, category-theory"/>

    <meta property="og:image" content="http://arrow-kt.io/img/poster.png"/>
    <meta property="og:title" content="Arrow"/>
    <meta property="og:site_name" content="Arrow"/>
    <meta property="og:url" content="http://arrow-kt.io/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:description" content="Functional companion to Kotlin&#39;s Standard Library"/>
    <meta property="og:keywords" content="functional-programming, kotlin-library, monads, monad-transformers, functional-data-structure, kotlin, fp-types, adt, free-monads, tagless-final, mtl, for-comprehension, category-theory"/>

    <meta name="twitter:text:description" content="Functional companion to Kotlin&#39;s Standard Library"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@arrow_kt"/>
    <meta name="twitter:creator" content="@arrow_kt"/>
    <meta name="twitter:image" content="http://arrow-kt.io/img/twitter-card.png"/>

    <!-- Arrow versions metadata -->
    <meta name="previous-version" data-title="" data-url=""/>
    <meta name="stable-version" data-title="" data-url=""/>
    <meta name="next-version" data-title="" data-url=""/>

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" rel="stylesheet" type="text/css"/>
    <!-- Animated -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css"/>
    <!-- Arrow main css -->
    <link rel="shortcut icon" href="../../../../img/favicon.png"/>
    <!-- highlight  css -->
    <link rel="stylesheet" type="text/css" href="../../../../css/highlight/atom-one-light.css"/>
    <!-- Arrow main css -->
    <link rel="stylesheet" type="text/css" href="../../../../css/arrow.css"/>

    <!-- Code to manage version information -->
    <script src="../../../../js/docVersions.js" defer=""></script>

    <!-- Diagrams support -->
    <script src="../../../../js/dagre.min.js"></script>
    <script src="../../../../js/lodash.min.js"></script>
    <script src="../../../../js/nomnoml.js"></script>
    <script src="../../../../js/diagrams.js" async=""></script>

    
        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-18433785-18"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-18433785-18');
</script>

    
</head>

<body id="doc-body">
<div id="wrapper">
    <div id="sidebar-wrapper">
    <div class="sidebar-brand">
        <a class="brand" href="https://next.arrow-kt.io/">
            <img src="../../../../img/arrow-brand-sidebar.svg" alt=""/>
            <span>&Lambda;rrow</span>
        </a>
        <button type="button" id="main-toggle" class="sidebar-toggle">
            <span class="close"></span>
        </button>
    </div>

    <ul class="sidebar-nav sidebar-doc-versions">
  <li class="sidebar-nav-item">
    <a href="index.html#">
      <span>Arrow version</span>
      <span id="arrow-version"></span>
    </a>
    <ul>
      <li>
        <a href="https://arrow-kt.io/docs/">
          <span>
            v0.9.0 - STABLE
          </span>
        </a>
      </li>

      <li>
        <a href="../../../index.html">
            <span>
              v0.9.1 - NEXT
            </span>
        </a>
      </li>

      <li>
        <a href="https://0-8-2.arrow-kt.io/docs/">
            <span>
              v0.8.2 -
              PREVIOUS
            </span>
        </a>
      </li>

      
        
      
        
      
        
      
    </ul>
  </li>
</ul>


    <ul class="sidebar-nav">
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Quick Start</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../index.html">
                        <i class="fa fa-circle"></i>
                        <span>Index</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../quickstart/libraries/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Libraries</span>
                    </a>
                </li>
                
                <li>
                    <a href="https://next.arrow-kt.io/blog/">
                        <i class="fa fa-circle"></i>
                        <span>Blogs &amp; Presentations</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../quickstart/projects/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Projects &amp; Examples</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Arrow Fx</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../effects/fx/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Getting Started</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../effects/fx/async/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Asynchronous &amp; Concurrent Programming</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../effects/fx/polymorphism/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Polymorphism. One Program multiple runtimes</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>API Docs</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../apidocs/arrow-typeclasses/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Type Classes</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-core-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Data Types</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-core-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-extras/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Extra Data Types</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-extras-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Core Extra Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-kotlinx-coroutines-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Coroutines</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-kotlinx-coroutines-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Coroutines Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-rx2-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Rx2</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-rx2-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Rx2 Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-reactor-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Reactor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-reactor-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effects Reactor Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-streams/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Streams</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-mtl/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MTL</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-optics/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Optics</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-recursion-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Recursion</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-recursion-extensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Recursion Extensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-generic/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Generic</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-free-data/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Free</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-validation/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Validation</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Patterns</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../glossary/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Glossary</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../error_handling/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Error Handling</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../dependency_injection/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Dependency Injection</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../monads/index.html">
                        <i class="fa fa-circle"></i>
                        <span>The Monad Tutorial</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../monad_comprehensions/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monad Comprehensions</span>
                    </a>
                </li>
                
                <li>
                    <a href="../index.html">
                        <i class="fa fa-circle"></i>
                        <span>Polymorphic Programs</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../free_algebras/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Free Algebras</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Data Types</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../datatypes/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Intro</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../datatypes/basic/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Basic Types</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/option/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Option</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/either/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Either</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/try/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Try</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/validated/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Validated</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/nonemptylist/index.html">
                        <i class="fa fa-circle"></i>
                        <span>NonEmptyList</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/listk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>ListK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/sequencek/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SequenceK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/setk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SetK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/mapk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MapK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/sortedmapk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SortedMapK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/ior/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Ior</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/id/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Id</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/reader/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Reader</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/kleisli/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Kleisli</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/state/index.html">
                        <i class="fa fa-circle"></i>
                        <span>State</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/statet/index.html">
                        <i class="fa fa-circle"></i>
                        <span>StateT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/store/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Store</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/moore/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Moore</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/sum/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Sum</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/day/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Day</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/writert/index.html">
                        <i class="fa fa-circle"></i>
                        <span>WriterT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/free/trampoline/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Trampoline</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/coproduct/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Coproduct</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/eval/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Eval</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/optiont/index.html">
                        <i class="fa fa-circle"></i>
                        <span>OptionT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/data/eithert/index.html">
                        <i class="fa fa-circle"></i>
                        <span>EitherT</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/function0/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Function0</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/core/function1/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Function1</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/const/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Const</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Type Classes</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../typeclasses/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Intro</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/show/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Show</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/eq/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Eq</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/hash/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Hash</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/order/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Order</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/semigroup/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Semigroup</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-typeclasses/arrow.typeclasses/-semigroupal/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Semigroupal</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-typeclasses/arrow.typeclasses/-monoidal/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monoidal</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/monoid/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monoid</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-typeclasses/arrow.typeclasses/-semiring/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Semiring</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/foldable/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Foldable</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/bifoldable/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bifoldable</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/traverse/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Traverse</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/reducible/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Reducible</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/traversefilter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>TraverseFilter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/functor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Functor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/functorfilter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>FunctorFilter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/applicative/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Applicative</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/applicativeerror/index.html">
                        <i class="fa fa-circle"></i>
                        <span>ApplicativeError</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/selective/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Selective</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/monad/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Monad</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/monaderror/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadError</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/effects/typeclasses/bracket/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bracket</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/monadfilter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadFilter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/monadreader/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadReader</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/monadwriter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadWriter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/monadstate/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadState</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/mtl/typeclasses/monadcombine/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadCombine</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/comonad/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Comonad</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/bimonad/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bimonad</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/bifunctor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Bifunctor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/profunctor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Profunctor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/semigroupk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>SemigroupK</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/monoidk/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonoidK</span>
                    </a>
                </li>
                
                <li>
                    <a href="https://next.arrow-kt.io/docs/typeclasses/inject/">
                        <i class="fa fa-circle"></i>
                        <span>Inject</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/alternative/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Alternative</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/divide/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Divide</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/divisible/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Divisible</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../arrow/typeclasses/decidable/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Decidable</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Effects</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../effects/io/index.html">
                        <i class="fa fa-circle"></i>
                        <span>IO</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../effects/monaddefer/index.html">
                        <i class="fa fa-circle"></i>
                        <span>MonadDefer</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../effects/async/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Async</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../effects/effect/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Effect</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../effects/promise/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Promise</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../effects/ref/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Ref</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../effects/fiber/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Fiber</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../apidocs/arrow-effects-data/arrow.effects/-resource/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Resource</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Optics</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../optics/dsl/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Optics DSL</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/iso/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Iso</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/lens/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Lens</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/optional/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Optional</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/prism/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Prism</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/getter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Getter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/setter/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Setter</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/fold/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Fold</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/traversal/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Traversal</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/cons/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Cons</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/snoc/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Snoc</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/at/index.html">
                        <i class="fa fa-circle"></i>
                        <span>At</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/index/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Index</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/filterindex/index.html">
                        <i class="fa fa-circle"></i>
                        <span>FilterIndex</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../optics/each/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Each</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>&Lambda;rrow Query Language</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../aql/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>&Lambda;rrow Query Language</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/select/index.html">
                        <i class="fa fa-circle"></i>
                        <span>select</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/from/index.html">
                        <i class="fa fa-circle"></i>
                        <span>from</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/where/index.html">
                        <i class="fa fa-circle"></i>
                        <span>where</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/groupby/index.html">
                        <i class="fa fa-circle"></i>
                        <span>groupBy</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/orderby/index.html">
                        <i class="fa fa-circle"></i>
                        <span>orderBy</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/sum/index.html">
                        <i class="fa fa-circle"></i>
                        <span>sum</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/union/index.html">
                        <i class="fa fa-circle"></i>
                        <span>union</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../aql/custom/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Custom Data Types</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Generic</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../generic/coproduct/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Coproduct</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../generic/product/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Product</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Integrations</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../integrations/rx2/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Rx2</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../integrations/reactor/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Reactor</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../integrations/kotlinxcoroutines/index.html">
                        <i class="fa fa-circle"></i>
                        <span>kotlinx.coroutines</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../integrations/retrofit/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Retrofit</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../integrations/kindedj/index.html">
                        <i class="fa fa-circle"></i>
                        <span>KindedJ</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Free</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../free/free/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Free</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../free/freeapplicative/index.html">
                        <i class="fa fa-circle"></i>
                        <span>FreeApplicative</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../free/cofree/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Cofree</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../free/yoneda/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Yoneda</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../free/coyoneda/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Coyoneda</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Recursion Schemes</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../recursion/intro/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Intro</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/recursive/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Recursive</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/corecursive/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Corecursive</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/birecursive/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Birecursive</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/mu/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Mu</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/nu/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Nu</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../recursion/fix/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Fix</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
        <li class="sidebar-nav-item">
            <a href="index.html#">
                <span>Legal</span>
                
                <i class="fa fa-angle-right"></i>
                
            </a>
            
            <ul>
                
                <li>
                    <a href="../../../legal/credits/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Credits</span>
                    </a>
                </li>
                
                <li>
                    <a href="../../../legal/licenses/index.html">
                        <i class="fa fa-circle"></i>
                        <span>Licenses</span>
                    </a>
                </li>
                
            </ul>
            
        </li>
        
    </ul>

</div>

    <div id="doc-wrapper">
    <div class="doc-header">
        <button type="button" id="main-toggle" class="sidebar-toggle">
            <i class="fa fa-lg fa-bars menu-icon"></i>
        </button>
        <div class="search-wrapper">
          <input id="docsearch" class="search" placeholder="Search documentation..." type="search"/>
        </div>
        <a target="_blank" href="https://github.com/arrow-kt/arrow/edit/master/modules/docs/arrow-docs/docs/docs/patterns/polymorphicprograms/ru/README.md">
          <i class="fa fa-pencil"></i>
            Edit
        </a>
    </div>
    <div class="doc-content">
        
        <a class="dashingAutolink" name="autolink-118"></a><a class="dashAnchor" name="//apple_ref/cpp/Guide/%D0%9A%D0%B0%D0%BA%20%D0%BF%D0%B8%D1%81%D0%B0%D1%82%D1%8C%20%D0%BF%D0%BE%D0%BB%D0%B8%D0%BC%D0%BE%D1%80%D1%84%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D1%8B"></a><h2 id="---">   </h2>

<p class="advanced">advanced</p>

<p><a href="../index.html">English</a></p>

<p>           ,     ,    , <strong>    </strong>?</p>

<p>,     ,     <code class="highlighter-rouge">Observable</code>   RxJava.           ,        <code class="highlighter-rouge">Observable</code>     ?</p>

<p>      <code class="highlighter-rouge">Flowable</code>, <code class="highlighter-rouge">Deferred</code> (), <code class="highlighter-rouge">Future</code>, <code class="highlighter-rouge">IO</code>,   .</p>

<p>       (       ),           (<code class="highlighter-rouge">map</code>),  <code class="highlighter-rouge">flatMap</code>      ,        (<code class="highlighter-rouge">zip</code>),  ..</p>

<p> ,   ,    ,     ,             <code class="highlighter-rouge">Observable</code>  ,       ,   <code class="highlighter-rouge">map</code>, <code class="highlighter-rouge">flatMap</code>,  .</p>

<p>       ,      .     ,     .</p>

<h3 id="-"> </h3>

<p>       <a href="https://twitter.com/raulraja">Ra&uacute;l Raja</a>,      .</p>

<p>,        ,            <code class="highlighter-rouge">Task</code>.        ,      .        ,         <code class="highlighter-rouge">Task</code>    <code class="highlighter-rouge">User</code>,    :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">DataSource</span> <span class="p">{</span>
  <span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Observable</span><span class="p">&lt;</span><span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>     <code class="highlighter-rouge">Observable</code>,     <code class="highlighter-rouge">Single</code>, <code class="highlighter-rouge">Maybe</code>, <code class="highlighter-rouge">Flowable</code>, <code class="highlighter-rouge">Deferred</code> -  ,    .</p>

<p>     ,   <strong></strong>,   <strong></strong>.</p>

<pre><code class="language-Kotlin">class LocalDataSource : DataSource {
  private val localCache: Map&lt;User, List&lt;Task&gt;&gt; =
    mapOf(User(UserId(&#34;user1&#34;)) to listOf(Task(&#34;LocalTask assigned to user1&#34;)))

  override fun allTasksByUser(user: User): Observable&lt;List&lt;Task&gt;&gt; = 
    Observable.create { emitter -&gt;
      val cachedUser = localCache[user]
      if (cachedUser != null) {
        emitter.onNext(cachedUser)
      } else {
        emitter.onError(UserNotInLocalStorage(user))
      }
    }
}

class RemoteDataSource : DataSource {
  private val internetStorage: Map&lt;User, List&lt;Task&gt;&gt; =
    mapOf(User(UserId(&#34;user2&#34;)) to listOf(Task(&#34;Remote Task assigned to user2&#34;)))

  override fun allTasksByUser(user: User): Observable&lt;List&lt;Task&gt;&gt; = 
    Observable.create { emitter -&gt;
      val networkUser = internetStorage[user]
      if (networkUser != null) {
        emitter.onNext(networkUser)
      } else {
        emitter.onError(UserNotInRemoteStorage(user))
      }
    }
}
</code></pre>

<p>     .      ,            API.           <code class="highlighter-rouge">Map&lt;User, List&lt;Task&gt;&gt;</code>.</p>

<p>..     ,   -  .   <code class="highlighter-rouge"></code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">TaskRepository</span><span class="p">(</span><span class="k">private</span> <span class="kd">val</span> <span class="py">localDS</span><span class="p">:</span> <span class="n">DataSource</span><span class="p">,</span> 
                     <span class="k">private</span> <span class="kd">val</span> <span class="py">remoteDS</span><span class="p">:</span> <span class="n">RemoteDataSource</span><span class="p">)</span> <span class="p">{</span>

  <span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Observable</span><span class="p">&lt;</span><span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
    <span class="n">localDS</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
      <span class="p">.</span><span class="n">subscribeOn</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="n">io</span><span class="p">())</span>
      <span class="p">.</span><span class="n">observeOn</span><span class="p">(</span><span class="n">Schedulers</span><span class="p">.</span><span class="n">computation</span><span class="p">())</span>
      <span class="p">.</span><span class="n">onErrorResumeNext</span> <span class="p">{</span> <span class="nv">_</span><span class="p">:</span> <span class="nc">Throwable</span> <span class="p">-&gt;</span> <span class="n">remoteDS</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>    <code class="highlighter-rouge">List&lt;Task&gt;</code>  <code class="highlighter-rouge">LocalDataSource</code>,      &mdash;        <code class="highlighter-rouge">RemoteDataSource</code>.</p>

<p>                (DI):</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Module</span> <span class="p">{</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">localDataSource</span><span class="p">:</span> <span class="n">LocalDataSource</span> <span class="p">=</span> <span class="n">LocalDataSource</span><span class="p">()</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">remoteDataSource</span><span class="p">:</span> <span class="n">RemoteDataSource</span> <span class="p">=</span> <span class="n">RemoteDataSource</span><span class="p">()</span>
  <span class="kd">val</span> <span class="py">repository</span><span class="p">:</span> <span class="n">TaskRepository</span> <span class="p">=</span> <span class="n">TaskRepository</span><span class="p">(</span><span class="n">localDataSource</span><span class="p">,</span> <span class="n">remoteDataSource</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p> ,    ,    :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">object</span> <span class="nc">test</span> <span class="p">{</span>

  <span class="nd">@JvmStatic</span>
  <span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="nv">args</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;):</span> <span class="nc">Unit</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">user1</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user1&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user2</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user2&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user3</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;unknown user&#34;</span><span class="p">))</span>

    <span class="kd">val</span> <span class="py">dependenciesModule</span> <span class="p">=</span> <span class="n">Module</span><span class="p">()</span>
    <span class="n">dependenciesModule</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user1</span><span class="p">).</span><span class="n">subscribe</span><span class="p">({</span> <span class="n">println</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">},</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">})</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user2</span><span class="p">).</span><span class="n">subscribe</span><span class="p">({</span> <span class="n">println</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">},</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">})</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user3</span><span class="p">).</span><span class="n">subscribe</span><span class="p">({</span> <span class="n">println</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">},</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">})</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="https://gist.github.com/JorgeCastilloPrz/05793f11497e0e31f207d2a3e6522bdb">      </a>.</p>

<p>       ,       <a href="https://next.arrow-kt.io/docs/integrations/rx2"><code class="highlighter-rouge">Observable</code></a>.</p>

<p>    <code class="highlighter-rouge">User</code> ,    . <code class="highlighter-rouge">User1</code>    DataSource,  <code class="highlighter-rouge">User2</code>   .</p>

<p>    <code class="highlighter-rouge">User3</code>, ..,     .        -     .           .</p>

<p>         :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt; [Task(value=LocalTask assigned to user1)]
&gt; [Task(value=Remote Task assigned to user2)]
&gt; UserNotInRemoteStorage(user=User(userId=UserId(value=unknown user)))
</code></pre></div></div>

<p>   .         <strong> </strong></p>

<h3 id="--">  </h3>

<p>    <code class="highlighter-rouge">DataSource</code>   :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">DataSource</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>   ,     :</p>

<ul>
  <li>     (generic) <code class="highlighter-rouge">F</code>.</li>
  <li>,    <code class="highlighter-rouge">Kind&lt;F, List&lt;Task&gt;&gt;</code>.</li>
</ul>

<p><code class="highlighter-rouge">Kind</code>  <a href="../../glossary/index.html#type-constructors">,  Arrow  ,    <strong>  (higher kind)</strong></a>.
     .</p>

<p> <code class="highlighter-rouge">Observable&lt;A&gt;</code>  2 :</p>

<ul>
  <li><code class="highlighter-rouge">Observable</code>: ,  .</li>
  <li><code class="highlighter-rouge">A</code>:   . ,      .</li>
</ul>

<p>      <code class="highlighter-rouge">A</code>,  .    ,         <code class="highlighter-rouge">Observable</code>.     <strong> </strong>.</p>

<p>  ,        <code class="highlighter-rouge">F&lt;A&gt;</code>    <code class="highlighter-rouge">F</code>  <code class="highlighter-rouge">A</code>    .       Kotlin (<a href="https://github.com/Kotlin/KEEP/pull/87"> ?</a>),      .</p>

<p>Arrow    <a href="../../glossary/index.html#type-constructors">    <code class="highlighter-rouge">Kind&lt;F, A&gt;</code></a>,        ,            ,       <code class="highlighter-rouge">Kind&lt;Observable, List&lt;Task&gt;&gt;</code>  <code class="highlighter-rouge">Observable&lt;List&lt;Task&gt;&gt;</code>  .   ,  .</p>

<p>      :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">DataSource</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;</span> <span class="p">{</span>
  <span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span>
<span class="p">}</span>
</code></pre></div></div>

<p> <code class="highlighter-rouge">DataSource</code> <strong>  </strong>: <code class="highlighter-rouge">Kind&lt;F, List&lt;Task&gt;&gt;</code>.    <code class="highlighter-rouge">F&lt;List&lt;Task&gt;&gt;</code>,  <code class="highlighter-rouge">F</code>  .</p>

<p>    <code class="highlighter-rouge">List&lt;Task&gt;</code>.  ,   ,      <code class="highlighter-rouge">F</code>,   ,      <code class="highlighter-rouge">List&lt;Task&gt;</code>.   <strong>     </strong>.  ?  .</p>

<p>      <code class="highlighter-rouge">DataSource</code>,        .   :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">LocalDataSource</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;(</span><span class="nv">A</span><span class="p">:</span> <span class="nc">ApplicativeError</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">Throwable</span><span class="p">&gt;)</span> <span class="p">:</span> <span class="nc">DataSource</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;,</span> <span class="n">ApplicativeError</span><span class="p">&lt;</span><span class="n">F</span><span class="p">,</span> <span class="n">Throwable</span><span class="p">&gt;</span> <span class="k">by</span> <span class="n">A</span> <span class="p">{</span>
      
    <span class="k">private</span> <span class="kd">val</span> <span class="py">localCache</span><span class="p">:</span> <span class="n">Map</span><span class="p">&lt;</span><span class="n">User</span><span class="p">,</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
      <span class="n">mapOf</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user1&#34;</span><span class="p">))</span> <span class="n">to</span> <span class="n">listOf</span><span class="p">(</span><span class="n">Task</span><span class="p">(</span><span class="s">&#34;LocalTask assigned to user1&#34;</span><span class="p">)))</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
      <span class="n">Option</span><span class="p">.</span><span class="n">fromNullable</span><span class="p">(</span><span class="n">localCache</span><span class="p">[</span><span class="n">user</span><span class="p">]).</span><span class="n">fold</span><span class="p">(</span>
        <span class="p">{</span> <span class="n">raiseError</span><span class="p">(</span><span class="n">UserNotInLocalStorage</span><span class="p">(</span><span class="n">user</span><span class="p">))</span> <span class="p">},</span>
        <span class="p">{</span> <span class="n">just</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">}</span>
      <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>  ,     .</p>

<p> <code class="highlighter-rouge">DataSource</code>    <code class="highlighter-rouge">F</code> ..,  <code class="highlighter-rouge">DataSource&lt;F&gt;</code>.        .</p>

<p>,     <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicativeerror"><code class="highlighter-rouge">ApplicativeError</code></a>       <code class="highlighter-rouge">allTasksByUser()</code>.   <code class="highlighter-rouge">ApplicativeError</code>   .</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">override</span> <span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
    <span class="n">Option</span><span class="p">.</span><span class="n">fromNullable</span><span class="p">(</span><span class="n">localCache</span><span class="p">[</span><span class="n">user</span><span class="p">]).</span><span class="n">fold</span><span class="p">(</span>
      <span class="p">{</span> <span class="n">raiseError</span><span class="p">(</span><span class="n">UserNotInLocalStorage</span><span class="p">(</span><span class="n">user</span><span class="p">))</span> <span class="p">},</span>
      <span class="p">{</span> <span class="n">just</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">}</span>
    <span class="p">)</span>
</code></pre></div></div>

<p>    <code class="highlighter-rouge">Kind&lt;F, List&lt;Task&gt;&gt;</code>.           <code class="highlighter-rouge">F</code>   ,    <code class="highlighter-rouge">List&lt;Task&gt;</code>.</p>

<p>  .    ,       <code class="highlighter-rouge">Task</code>        ,   <strong>  </strong> (<code class="highlighter-rouge">Task</code>  )  ** <code class="highlighter-rouge">Task</code>    <code class="highlighter-rouge">F</code> (<code class="highlighter-rouge">Task</code> ).</p>

<p>      : <code class="highlighter-rouge">Kind&lt;F, List&lt;Task&gt;&gt;</code>.</p>

<p> :   <strong>      (<code class="highlighter-rouge">F</code>)</strong>,      ,    . ,       ,     ,     .   - ?</p>

<p>         <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicativeerror"><code class="highlighter-rouge">ApplicativeError</code></a>           (<code class="highlighter-rouge">by A</code>).</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">LocalDataSource</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;(</span><span class="nv">A</span><span class="p">:</span> <span class="nc">ApplicativeError</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">Throwable</span><span class="p">&gt;)</span> <span class="p">:</span> <span class="nc">DataSource</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;,</span> <span class="n">ApplicativeError</span><span class="p">&lt;</span><span class="n">F</span><span class="p">,</span> <span class="n">Throwable</span><span class="p">&gt;</span> <span class="k">by</span> <span class="n">A</span> <span class="p">{</span>
    <span class="c1">//...</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicativeerror"><code class="highlighter-rouge">ApplicativeError</code></a>   <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicative"><code class="highlighter-rouge">Applicative</code></a>,   - <a href="https://next.arrow-kt.io/docs/typeclasses/intro"><strong> </strong></a>.</p>

<p><strong>    ()</strong>.    ,        ,   <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/monad"><code class="highlighter-rouge">Monad&lt;F&gt;</code></a>, <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/functor"><code class="highlighter-rouge">Functor&lt;F&gt;</code></a>   .  <code class="highlighter-rouge">F</code>   .        <a href="https://next.arrow-kt.io/docs/arrow/core/either/ru"><code class="highlighter-rouge">Either</code></a>, <a href="../../../arrow/core/option/ru"><code class="highlighter-rouge">Option</code></a>, <a href="https://next.arrow-kt.io/docs/effects/io"><code class="highlighter-rouge">IO</code></a>, <a href="https://next.arrow-kt.io/docs/integrations/rx2"><code class="highlighter-rouge">Observable</code></a>, <a href="https://next.arrow-kt.io/docs/integrations/rx2"><code class="highlighter-rouge">Flowable</code></a>   .</p>

<p>,     :</p>

<ul>
  <li><strong> ,       <code class="highlighter-rouge">Kind&lt;F, List&lt;Task&gt;&gt;</code></strong></li>
</ul>

<p>       <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicative"><code class="highlighter-rouge">Applicative</code></a>. .., <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicativeerror"><code class="highlighter-rouge">ApplicativeError</code></a>   ,     .</p>

<p><a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicative"><code class="highlighter-rouge">Applicative</code></a>    <code class="highlighter-rouge">just(a)</code>. <code class="highlighter-rouge">just(a)</code> <strong>      </strong>.  ,     <code class="highlighter-rouge">Applicative&lt;F&gt;</code>,    <code class="highlighter-rouge">just(a)</code>,      <code class="highlighter-rouge">F</code>,      . ,   <code class="highlighter-rouge">Observable</code>,    <code class="highlighter-rouge">Applicative&lt;Observable&gt;</code>,  ,   <code class="highlighter-rouge">a</code>  <code class="highlighter-rouge">Observable</code>,     <code class="highlighter-rouge">Observable.just(a)</code>.</p>

<ul>
  <li><strong>    <code class="highlighter-rouge">Kind&lt;F, List&lt;Task&gt;&gt;</code></strong></li>
</ul>

<p>     <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicativeerror"><code class="highlighter-rouge">ApplicativeError</code></a>.    <code class="highlighter-rouge">raiseError(e)</code>,       <code class="highlighter-rouge">F</code>.    <code class="highlighter-rouge">Observable</code>,    -  <code class="highlighter-rouge">Observable.error&lt;A&gt;(t)</code>,  <code class="highlighter-rouge">t</code>  <code class="highlighter-rouge">Throwable</code>,           <code class="highlighter-rouge">ApplicativeError&lt;F, Throwable&gt;</code>.</p>

<p>     <code class="highlighter-rouge">LocalDataSource&lt;F&gt;</code>.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">LocalDataSource</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;(</span><span class="nv">A</span><span class="p">:</span> <span class="nc">ApplicativeError</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">Throwable</span><span class="p">&gt;)</span> <span class="p">:</span> 
    <span class="nc">DataSource</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;,</span> <span class="n">ApplicativeError</span><span class="p">&lt;</span><span class="n">F</span><span class="p">,</span> <span class="n">Throwable</span><span class="p">&gt;</span> <span class="k">by</span> <span class="n">A</span> <span class="p">{</span>

    <span class="k">private</span> <span class="kd">val</span> <span class="py">localCache</span><span class="p">:</span> <span class="n">Map</span><span class="p">&lt;</span><span class="n">User</span><span class="p">,</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
      <span class="n">mapOf</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user1&#34;</span><span class="p">))</span> <span class="n">to</span> <span class="n">listOf</span><span class="p">(</span><span class="n">Task</span><span class="p">(</span><span class="s">&#34;LocalTask assigned to user1&#34;</span><span class="p">)))</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
      <span class="n">Option</span><span class="p">.</span><span class="n">fromNullable</span><span class="p">(</span><span class="n">localCache</span><span class="p">[</span><span class="n">user</span><span class="p">]).</span><span class="n">fold</span><span class="p">(</span>
        <span class="p">{</span> <span class="n">raiseError</span><span class="p">(</span><span class="n">UserNotInLocalStorage</span><span class="p">(</span><span class="n">user</span><span class="p">))</span> <span class="p">},</span>
        <span class="p">{</span> <span class="n">just</span><span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">}</span>
      <span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>   <code class="highlighter-rouge">Map&lt;User, List&lt;Task&gt;&gt;</code>   ,      ,      :</p>

<ul>
  <li>
    <p>    <code class="highlighter-rouge">Task</code>     ..,     <code class="highlighter-rouge">null</code> (<code class="highlighter-rouge">Task</code>    ),      <a href="../../../arrow/core/option/ru"><code class="highlighter-rouge">Option</code></a>.  ,   <a href="../../../arrow/core/option/ru"><code class="highlighter-rouge">Option</code></a>,       ,    .</p>
  </li>
  <li>
    <p>   ,     <code class="highlighter-rouge">fold</code>.      <code class="highlighter-rouge">when</code>   .   <strong></strong>,  <code class="highlighter-rouge">Option</code>      <code class="highlighter-rouge">F</code> (  ).    <strong></strong> <code class="highlighter-rouge">Option</code>       <code class="highlighter-rouge">F</code> ( ).      <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicativeerror"><code class="highlighter-rouge">ApplicativeError</code></a>   : <code class="highlighter-rouge">raiseError()</code>  <code class="highlighter-rouge">just()</code>.</p>
  </li>
</ul>

<p>          ,            <code class="highlighter-rouge">F</code>.</p>

<p>  <code class="highlighter-rouge">DataSource</code>   :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">RemoteDataSource</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;(</span><span class="nv">A</span><span class="p">:</span> <span class="nc">Async</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;)</span> <span class="p">:</span> <span class="nc">DataSource</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;,</span> <span class="n">Async</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;</span> <span class="k">by</span> <span class="n">A</span> <span class="p">{</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">internetStorage</span><span class="p">:</span> <span class="n">Map</span><span class="p">&lt;</span><span class="n">User</span><span class="p">,</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
    <span class="n">mapOf</span><span class="p">(</span><span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user2&#34;</span><span class="p">))</span> <span class="n">to</span> <span class="n">listOf</span><span class="p">(</span><span class="n">Task</span><span class="p">(</span><span class="s">&#34;Remote Task assigned to user2&#34;</span><span class="p">)))</span>

  <span class="k">override</span> <span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
    <span class="n">async</span> <span class="p">{</span> <span class="n">callback</span><span class="p">:</span> <span class="p">(</span><span class="n">Either</span><span class="p">&lt;</span><span class="n">Throwable</span><span class="p">,</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&gt;&gt;)</span> <span class="p">-&gt;</span> <span class="n">Unit</span> <span class="p">-&gt;</span>
      <span class="n">Option</span><span class="p">.</span><span class="n">fromNullable</span><span class="p">(</span><span class="n">internetStorage</span><span class="p">[</span><span class="n">user</span><span class="p">]).</span><span class="n">fold</span><span class="p">(</span>
        <span class="p">{</span> <span class="n">callback</span><span class="p">(</span><span class="n">UserNotInRemoteStorage</span><span class="p">(</span><span class="n">user</span><span class="p">).</span><span class="n">left</span><span class="p">())</span> <span class="p">},</span>
        <span class="p">{</span> <span class="n">callback</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">right</span><span class="p">())</span> <span class="p">}</span>
      <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>    :     <a href="https://next.arrow-kt.io/docs/arrow/typeclasses/applicativeerror"><code class="highlighter-rouge">ApplicativeError</code></a>     : <a href="../../../effects/async/index.html"><code class="highlighter-rouge">Async</code></a>.</p>

<p>  - ,       .    ,    ,    ,   .</p>

<p><a href="../../../effects/async/index.html"><code class="highlighter-rouge">Async</code></a>     .        . ,        ,    <strong>  </strong> .</p>

<p>  :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">override</span> <span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
    <span class="n">async</span> <span class="p">{</span> <span class="n">callback</span><span class="p">:</span> <span class="p">(</span><span class="n">Either</span><span class="p">&lt;</span><span class="n">Throwable</span><span class="p">,</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&gt;&gt;)</span> <span class="p">-&gt;</span> <span class="n">Unit</span> <span class="p">-&gt;</span>
      <span class="n">Option</span><span class="p">.</span><span class="n">fromNullable</span><span class="p">(</span><span class="n">internetStorage</span><span class="p">[</span><span class="n">user</span><span class="p">]).</span><span class="n">fold</span><span class="p">(</span>
        <span class="p">{</span> <span class="n">callback</span><span class="p">(</span><span class="n">UserNotInRemoteStorage</span><span class="p">(</span><span class="n">user</span><span class="p">).</span><span class="n">left</span><span class="p">())</span> <span class="p">},</span>
        <span class="p">{</span> <span class="n">callback</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">right</span><span class="p">())</span> <span class="p">}</span>
      <span class="p">)</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>    <code class="highlighter-rouge">async {}</code>,      <a href="../../../effects/async/index.html"><code class="highlighter-rouge">Async</code></a>        <code class="highlighter-rouge">Kind&lt;F, List&lt;Task&gt;&gt;</code>    .</p>

<p>        <code class="highlighter-rouge">Observable</code>, <code class="highlighter-rouge">Async.async {}</code>    <code class="highlighter-rouge">Observable.create()</code>, ..  ,         ,  <code class="highlighter-rouge">Thread</code>  <code class="highlighter-rouge">AsyncTask</code>.</p>

<p> <code class="highlighter-rouge">callback</code>         <code class="highlighter-rouge">F</code>,    .</p>

<p>   <code class="highlighter-rouge">RemoteDataSource</code>          <code class="highlighter-rouge">F</code>.</p>

<p>           .   ,       <code class="highlighter-rouge">Task</code>  <code class="highlighter-rouge">LocalDataSource</code>,    (     )    <code class="highlighter-rouge">RemoteLocalDataSource</code>.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">TaskRepository</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;(</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">localDS</span><span class="p">:</span> <span class="n">DataSource</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;,</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">remoteDS</span><span class="p">:</span> <span class="n">RemoteDataSource</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;,</span>
  <span class="nv">AE</span><span class="p">:</span> <span class="nc">ApplicativeError</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">Throwable</span><span class="p">&gt;)</span> <span class="p">:</span> <span class="nc">ApplicativeError</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">Throwable</span><span class="p">&gt;</span> <span class="k">by</span> <span class="n">AE</span> <span class="p">{</span>

  <span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
    <span class="n">localDS</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user</span><span class="p">).</span><span class="n">handleErrorWith</span> <span class="p">{</span>
      <span class="k">when</span> <span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="n">UserNotInLocalStorage</span> <span class="p">-&gt;</span> <span class="n">remoteDS</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="n">raiseError</span><span class="p">(</span><span class="n">UnknownError</span><span class="p">(</span><span class="n">it</span><span class="p">))</span>
      <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><a href="../../../arrow/typeclasses/applicativeerror/index.html"><code class="highlighter-rouge">ApplicativeError&lt;F, Throwable&gt;</code></a>   !     <code class="highlighter-rouge">handleErrorWith()</code>,       .</p>

<p>  :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="p">&lt;</span><span class="nc">A</span><span class="p">&gt;</span> <span class="nf">Kind</span><span class="p">&lt;</span><span class="n">F</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;.</span><span class="n">handleErrorWith</span><span class="p">(</span><span class="n">f</span><span class="p">:</span> <span class="p">(</span><span class="n">E</span><span class="p">)</span> <span class="p">-&gt;</span> <span class="n">Kind</span><span class="p">&lt;</span><span class="n">F</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">A</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>.. <code class="highlighter-rouge">localDS.allTasksByUser(user)</code>  <code class="highlighter-rouge">Kind&lt;F, List&lt;Task&gt;&gt;</code>,     <code class="highlighter-rouge">F&lt;List&lt;Task&gt;&gt;</code>,  <code class="highlighter-rouge">F</code>   ,    <code class="highlighter-rouge">handleErrorWith()</code>  .</p>

<p><code class="highlighter-rouge">handleErrorWith()</code>       .   :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">allTasksByUser</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">):</span> <span class="nc">Kind</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">,</span> <span class="nc">List</span><span class="err">&lt;</span><span class="nc">Task</span><span class="p">&gt;&gt;</span> <span class="p">=</span>
    <span class="n">localDS</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user</span><span class="p">).</span><span class="n">handleErrorWith</span> <span class="p">{</span>
      <span class="k">when</span> <span class="p">(</span><span class="n">it</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">is</span> <span class="n">UserNotInLocalStorage</span> <span class="p">-&gt;</span> <span class="n">remoteDS</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">-&gt;</span> <span class="n">raiseError</span><span class="p">(</span><span class="n">UnknownError</span><span class="p">(</span><span class="n">it</span><span class="p">))</span>
      <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>         ,    .    .        <code class="highlighter-rouge">UserNotInLocalStorage</code>,      <code class="highlighter-rouge">Tasks</code>   <code class="highlighter-rouge">DataSource</code>.            <code class="highlighter-rouge">F</code>.</p>

<p>        :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Module</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;(</span><span class="nv">A</span><span class="p">:</span> <span class="nc">Async</span><span class="p">&lt;</span><span class="nc">F</span><span class="p">&gt;)</span> <span class="p">{</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">localDataSource</span><span class="p">:</span> <span class="n">LocalDataSource</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">LocalDataSource</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
  <span class="k">private</span> <span class="kd">val</span> <span class="py">remoteDataSource</span><span class="p">:</span> <span class="n">RemoteDataSource</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;</span> <span class="p">=</span> <span class="n">RemoteDataSource</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
  <span class="kd">val</span> <span class="py">repository</span><span class="p">:</span> <span class="n">TaskRepository</span><span class="p">&lt;</span><span class="n">F</span><span class="p">&gt;</span> <span class="p">=</span> 
      <span class="n">TaskRepository</span><span class="p">(</span><span class="n">localDataSource</span><span class="p">,</span> <span class="n">remoteDataSource</span><span class="p">,</span> <span class="n">A</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>  &mdash;       <code class="highlighter-rouge">F</code>,   .      ,    ,  <a href="../../../effects/async/index.html"><code class="highlighter-rouge">Async</code></a>   <a href="../../../arrow/typeclasses/applicativeerror/index.html"><code class="highlighter-rouge">ApplicativeError</code></a>,            .</p>

<h3 id="-"> </h3>

<p>-   <strong> </strong>        (<code class="highlighter-rouge">F</code>)         .                 <code class="highlighter-rouge">F</code>.    ,     <code class="highlighter-rouge">Observable</code>.</p>

<p>   ,            ,  .</p>

<p>        <code class="highlighter-rouge">F</code> <code class="highlighter-rouge">Single</code>  RxJava.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">object</span> <span class="nc">test</span> <span class="p">{</span>

  <span class="nd">@JvmStatic</span>
  <span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="nv">args</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;):</span> <span class="nc">Unit</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">user1</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user1&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user2</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user2&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user3</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;unknown user&#34;</span><span class="p">))</span>

    <span class="kd">val</span> <span class="py">singleModule</span> <span class="p">=</span> <span class="n">Module</span><span class="p">(</span><span class="n">SingleK</span><span class="p">.</span><span class="n">async</span><span class="p">())</span>
    <span class="n">singleModule</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user1</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">single</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">,</span> <span class="o">::</span><span class="n">println</span><span class="p">)</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user2</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">single</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">,</span> <span class="o">::</span><span class="n">println</span><span class="p">)</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user3</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">single</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">,</span> <span class="o">::</span><span class="n">println</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>  Arrow       . ,    <a href="../../../integrations/rx2/index.html"><code class="highlighter-rouge">SingleK</code></a>.   <strong>          </strong>.</p>

<p>    :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Task(value=LocalTask assigned to user1)]
[Task(value=Remote Task assigned to user2)]
UserNotInRemoteStorage(user=User(userId=UserId(value=unknown user)))
</code></pre></div></div>

<p>   ,   <code class="highlighter-rouge">Observable</code>. </p>

<p>   <code class="highlighter-rouge">Maybe</code>,     <a href="../../../integrations/rx2/index.html"><code class="highlighter-rouge">MaybeK</code></a>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@JvmStatic</span>
<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="nv">args</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;):</span> <span class="nc">Unit</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">user1</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user1&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user2</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user2&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user3</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;unknown user&#34;</span><span class="p">))</span>

    <span class="kd">val</span> <span class="py">maybeModule</span> <span class="p">=</span> <span class="n">Module</span><span class="p">(</span><span class="n">MaybeK</span><span class="p">.</span><span class="n">async</span><span class="p">())</span>
    <span class="n">maybeModule</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user1</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">maybe</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">,</span> <span class="o">::</span><span class="n">println</span><span class="p">)</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user2</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">maybe</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">,</span> <span class="o">::</span><span class="n">println</span><span class="p">)</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user3</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">maybe</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">,</span> <span class="o">::</span><span class="n">println</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>      ,       :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">[Task(value=LocalTask assigned to user1)]</span>
<span class="na">[Task(value=Remote Task assigned to user2)]</span>
<span class="n">UserNotInRemoteStorage</span><span class="p">(</span><span class="n">user</span><span class="p">=</span><span class="n">User</span><span class="p">(</span><span class="n">userId</span><span class="p">=</span><span class="n">UserId</span><span class="p">(</span><span class="n">value</span><span class="p">=</span><span class="n">unknown</span> <span class="n">user</span><span class="p">)))</span>
</code></pre></div></div>

<p>  <a href="../../../integrations/rx2/index.html"><code class="highlighter-rouge">ObservableK</code></a> / <a href="../../../integrations/rx2/index.html"><code class="highlighter-rouge">FlowableK</code></a>? 
 :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">object</span> <span class="nc">test</span> <span class="p">{</span>

  <span class="nd">@JvmStatic</span>
  <span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="nv">args</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;):</span> <span class="nc">Unit</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">user1</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user1&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user2</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user2&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user3</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;unknown user&#34;</span><span class="p">))</span>

    <span class="kd">val</span> <span class="py">observableModule</span> <span class="p">=</span> <span class="n">Module</span><span class="p">(</span><span class="n">ObservableK</span><span class="p">.</span><span class="n">async</span><span class="p">())</span>
    <span class="n">observableModule</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user1</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">observable</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">,</span> <span class="o">::</span><span class="n">println</span><span class="p">)</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user2</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">observable</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">,</span> <span class="o">::</span><span class="n">println</span><span class="p">)</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user3</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">observable</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">,</span> <span class="o">::</span><span class="n">println</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">val</span> <span class="py">flowableModule</span> <span class="p">=</span> <span class="n">Module</span><span class="p">(</span><span class="n">FlowableK</span><span class="p">.</span><span class="n">async</span><span class="p">())</span>
    <span class="n">flowableModule</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user1</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">flowable</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">)</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user2</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">flowable</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">)</span>
      <span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user3</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">flowable</span><span class="p">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">::</span><span class="n">println</span><span class="p">,</span> <span class="o">::</span><span class="n">println</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>  :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Task(value=LocalTask assigned to user1)]
[Task(value=Remote Task assigned to user2)]
UserNotInRemoteStorage(user=User(userId=UserId(value=unknown user)))

[Task(value=LocalTask assigned to user1)]
[Task(value=Remote Task assigned to user2)]
UserNotInRemoteStorage(user=User(userId=UserId(value=unknown user)))
</code></pre></div></div>

<p> ,   . </p>

<p>   <a href="../../../integrations/kotlinxcoroutines/index.html"><code class="highlighter-rouge">DeferredK</code></a>,   
<code class="highlighter-rouge">kotlinx.coroutines.Deferred</code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">object</span> <span class="nc">test</span> <span class="p">{</span>

  <span class="nd">@JvmStatic</span>
  <span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="nv">args</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;):</span> <span class="nc">Unit</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">user1</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user1&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user2</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user2&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user3</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;unknown user&#34;</span><span class="p">))</span>

    <span class="kd">val</span> <span class="py">deferredModule</span> <span class="p">=</span> <span class="n">Module</span><span class="p">(</span><span class="n">DeferredK</span><span class="p">.</span><span class="n">async</span><span class="p">())</span>
    <span class="n">deferredModule</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span>
      <span class="n">runBlocking</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="n">println</span><span class="p">(</span><span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user1</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">deferred</span><span class="p">.</span><span class="n">await</span><span class="p">())</span>
          <span class="n">println</span><span class="p">(</span><span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user2</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">deferred</span><span class="p">.</span><span class="n">await</span><span class="p">())</span>
          <span class="n">println</span><span class="p">(</span><span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user3</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">deferred</span><span class="p">.</span><span class="n">await</span><span class="p">())</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nv">e</span><span class="p">:</span> <span class="nc">UserNotInRemoteStorage</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">println</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p> ,        .   ,        ,        .</p>

<p>  &mdash;   :</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Task(value=LocalTask assigned to user1)]
[Task(value=Remote Task assigned to user2)]
UserNotInRemoteStorage(user=User(userId=UserId(value=unknown user)))
</code></pre></div></div>

<p> Arrow   API     <a href="../../../integrations/kotlinxcoroutines/index.html"><code class="highlighter-rouge">DeferredK</code></a>.     <code class="highlighter-rouge">runBlocking</code>     :</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">object</span> <span class="nc">test</span> <span class="p">{</span>

  <span class="nd">@JvmStatic</span>
  <span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="nv">args</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;):</span> <span class="nc">Unit</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">user1</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user1&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user2</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user2&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user3</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;unknown user&#34;</span><span class="p">))</span>

    <span class="kd">val</span> <span class="py">deferredModuleAlt</span> <span class="p">=</span> <span class="n">Module</span><span class="p">(</span><span class="n">DeferredK</span><span class="p">.</span><span class="n">async</span><span class="p">())</span>
    <span class="n">deferredModuleAlt</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span>
      <span class="n">println</span><span class="p">(</span><span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user1</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">unsafeAttemptSync</span><span class="p">())</span>
      <span class="n">println</span><span class="p">(</span><span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user2</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">unsafeAttemptSync</span><span class="p">())</span>
      <span class="n">println</span><span class="p">(</span><span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user3</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">unsafeAttemptSync</span><span class="p">())</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>     <a href="../../../arrow/core/try/ru"><code class="highlighter-rouge">Try</code></a> (..,  <code class="highlighter-rouge">Success</code>   <code class="highlighter-rouge">Failure</code>).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Success(value=[Task(value=LocalTask assigned to user1)])
Success(value=[Task(value=Remote Task assigned to user2)])
Failure(exception=UserNotInRemoteStorage(user=User(userId=UserId(value=unknown user))))
</code></pre></div></div>

<p>,          ,  <a href="https://next.arrow-kt.io/docs/effects/io"><code class="highlighter-rouge">IO</code></a>.
<code class="highlighter-rouge">IO</code> ,   in/out ,      ,       .</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">object</span> <span class="nc">test</span> <span class="p">{</span>

  <span class="nd">@JvmStatic</span>
  <span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="nv">args</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;):</span> <span class="nc">Unit</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">user1</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user1&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user2</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;user2&#34;</span><span class="p">))</span>
    <span class="kd">val</span> <span class="py">user3</span> <span class="p">=</span> <span class="n">User</span><span class="p">(</span><span class="n">UserId</span><span class="p">(</span><span class="s">&#34;unknown user&#34;</span><span class="p">))</span>

    <span class="kd">val</span> <span class="py">ioModule</span> <span class="p">=</span> <span class="n">Module</span><span class="p">(</span><span class="n">IO</span><span class="p">.</span><span class="n">async</span><span class="p">())</span>
    <span class="n">ioModule</span><span class="p">.</span><span class="n">run</span> <span class="p">{</span>
      <span class="n">println</span><span class="p">(</span><span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user1</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">attempt</span><span class="p">().</span><span class="n">unsafeRunSync</span><span class="p">())</span>
      <span class="n">println</span><span class="p">(</span><span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user2</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">attempt</span><span class="p">().</span><span class="n">unsafeRunSync</span><span class="p">())</span>
      <span class="n">println</span><span class="p">(</span><span class="n">repository</span><span class="p">.</span><span class="n">allTasksByUser</span><span class="p">(</span><span class="n">user3</span><span class="p">).</span><span class="n">fix</span><span class="p">().</span><span class="n">attempt</span><span class="p">().</span><span class="n">unsafeRunSync</span><span class="p">())</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Right(b=[Task(value=LocalTask assigned to user1)])
Right(b=[Task(value=Remote Task assigned to user2)])
Left(a=UserNotInRemoteStorage(user=User(userId=UserId(value=unknown user))))
</code></pre></div></div>

<p><a href="https://next.arrow-kt.io/docs/effects/io"><code class="highlighter-rouge">IO</code></a> -  .          <a href="https://next.arrow-kt.io/docs/arrow/core/either/ru"><code class="highlighter-rouge">Either&lt;L,R&gt;</code></a> (   ).  , &ldquo;&rdquo;  <code class="highlighter-rouge">Either</code>    ,  &ldquo;&rdquo;    ,    .          <code class="highlighter-rouge">Right(...)</code>,  ,  <code class="highlighter-rouge">Left(...)</code>.</p>

<p>     .</p>

<p>,   .   ,         ,      ,           .</p>

<p><a href="https://gist.github.com/JorgeCastilloPrz/c0a4604b9a5dedc89be82b13cfcc1315">       </a>.</p>

<h3 id="-------">   &hellip;    ?</h3>

<p>   ,    ,      .     .</p>

<ul>
  <li>
    <p>      : ,      (,  )   &mdash; .  ,    <strong> </strong>.</p>
  </li>
  <li>
    <p>         ,    .         .        ()   (   )  ,   .</p>
  </li>
  <li>
    <p>      (),   ,           ().         ,         <a href="https://medium.com/@JorgeCastilloPr/kotlin-functional-programming-does-it-make-sense-36ad07e6bacf">    </a>.</p>
  </li>
  <li>
    <p>  ,          . ,            (      ).</p>
  </li>
  <li>
    <p>     <a href="https://next.arrow-kt.io/docs/typeclasses/intro"> </a>,      API     .       (        <code class="highlighter-rouge">map</code>, <code class="highlighter-rouge">flatMap</code>, <code class="highlighter-rouge">fold</code>,        ). ,     ,       Kotlin,  Arrow -   .</p>
  </li>
  <li>
    <p>  <strong>       DI ( )</strong>, ..,    DI &ldquo; &rdquo;.         ,         ,              .        DI, ..,     ,        .</p>
  </li>
  <li>
    <p>  ,     ,     .      , ..,    ,         .</p>
  </li>
</ul>

<h3 id=""></h3>

<p>     <strong> </strong>,    <a href="https://next.arrow-kt.io/docs/typeclasses/intro">   </a>. 
  ,         ,  <strong> ,      ,   </strong>.</p>

<p>  ,    .     -   Twitter: <a href="https://www.twitter.com/JorgeCastilloPR">@JorgeCastilloPR</a>.</p>

<p>    (,  )    :</p>

<ul>
  <li><a href="https://medium.com/@JorgeCastilloPr/kotlin-functional-programming-does-it-make-sense-36ad07e6bacf">Kotlin Functional Programming: Does it make sense?</a>  <a href="https://www.twitter.com/JorgeCastilloPR">Jorge Castillo</a>)</li>
  <li><a href="https://medium.com/@JorgeCastilloPr/kotlin-purity-and-function-memoization-b12ab35d70a5">Kotlin purity and Function Memoization</a>  <a href="https://www.twitter.com/JorgeCastilloPR">Jorge Castillo</a>)</li>
</ul>

<p>    <a href="https://youtu.be/sxudIMiOo68">FP to the max</a>  <a href="https://twitter.com/jdegoes">John De Goes</a>     <code class="highlighter-rouge">FpToTheMax.kt</code>,    <code class="highlighter-rouge">arrow-examples</code>.          ,   ,          .</p>

    </div>
</div>

</div>
<!-- Jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<!-- Arrow playground -->
<script src="https://unpkg.com/arrow-playground@1" data-selector="[class^=&#39;language-kotlin&#39;]"></script>
<!-- Highlight -->
<script src="../../../../js/highlight.pack.js"></script>
<script>
  hljs.initHighlighting();
</script>
<!-- Docsearch -->
<script type="text/javascript" src="../../../../js/docsearch.min.js"></script>
<!-- Custom scripts for this template -->
<script src="../../../../js/functions.js"></script>
<!-- Gitter -->
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'arrow-kt/Lobby'
  };

</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script>



</body></html>